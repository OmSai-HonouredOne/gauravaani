{% extends 'base.html' %}
{% block title %}{{ course.course_title }} - {{ params.name }}{% endblock %}

{% block content %}

<div class="container">

  <!-- BREADCRUMB -->
  <nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb spiritual-breadcrumb">
      <li class="breadcrumb-item">
        <a href="{{ url_for('courses.index') }}">Home</a>
      </li>
      <li class="breadcrumb-item">
        <a href="{{ url_for('courses.courses') }}">Courses</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        {{ course.course_title }}
      </li>
    </ol>
  </nav>

  <!-- COURSE INFO CARD -->
  <div class="admin-panel mb-5">
    <h2 class="text-center mb-4">{{ course.course_title }}</h2>

    <div class="row align-items-center">
      <div class="col-md-8">
        <p><strong>Course ID :</strong> {{ course.course_id }}</p>
        <p class="mt-3 form-text summary-text">{{ course.course_description }}</p>
      </div>

      <div class="col-md-4 text-center">
        {% if course.course_image %}
        <img src="{{ course.course_image }}"
             class="img-fluid rounded shadow"
             style="max-height:220px;">
        {% else %}
        <p class="form-text">No Image Available</p>
        {% endif %}
      </div>
    </div>
  </div>


  <!-- LECTURES TABLE -->
  <div class="admin-panel">

    <h4 class="mb-4 text-center">Lectures</h4>

    {% if lectures %}
    <div class="table-responsive">

      <table class="table table-dark table-hover align-middle">
        <thead>
          <tr>
            <th>Chapter</th>
            <th>#</th>
            <th>Title</th>
            <!-- <th>Summary</th> -->
            <!-- <th>Watch</th>
            <th>Notes</th> -->
            <th></th>
          </tr>
        </thead>

        <tbody>
        {% for lec in lectures %}
          <tr>
            <td>{{ lec.course_chapter }}</td>
            <td>{{ lec.lec_no }}</td>
            <td>{{ lec.lec_title }}</td>
            <!-- <td>{{ lec.lec_summary[:20] }}...</td> -->
            <!-- <td>
              <a href="{{ lec.lec_url }}" target="_blank" class="btn btn-spiritual btn-sm">
                View
              </a>
            </td>
            <td>
              {% if lec.notes_url %}
              <a href="{{ lec.notes_url }}" target="_blank" class="btn btn-outline-light btn-sm">
                Notes
              </a>
              {% else %}
              <span class="">N/A</span>
              {% endif %}
            </td> -->
            <td>
                <a href="{{ url_for('courses.view_lecture', course_id=course.course_id, course_chapter=lec.course_chapter, lec_no=lec.lec_no) }}" class="btn btn-spiritual btn-sm">
                    More Details
                </a>
            </td>
          </tr>
        {% endfor %}
        </tbody>

      </table>

    </div>
    {% else %}
      <p class="text-center form-text">No lectures available for this course yet.</p>
    {% endif %}

  </div>

</div>

{% endblock %}